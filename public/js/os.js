!function(t){var o={};function e(s){if(o[s])return o[s].exports;var i=o[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,e),i.l=!0,i.exports}e.m=t,e.c=o,e.d=function(t,o,s){e.o(t,o)||Object.defineProperty(t,o,{enumerable:!0,get:s})},e.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},e.t=function(t,o){if(1&o&&(t=e(t)),8&o)return t;if(4&o&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(e.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&o&&"string"!=typeof t)for(var i in t)e.d(s,i,function(o){return t[o]}.bind(null,i));return s},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,o){return Object.prototype.hasOwnProperty.call(t,o)},e.p="/",e(e.s=8)}({8:function(t,o,e){t.exports=e("RXzX")},"KHd+":function(t,o,e){"use strict";function s(t,o,e,s,i,r,a,n){var d,l="function"==typeof t?t.options:t;if(o&&(l.render=o,l.staticRenderFns=e,l._compiled=!0),s&&(l.functional=!0),r&&(l._scopeId="data-v-"+r),a?(d=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),i&&i.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},l._ssrRegister=d):i&&(d=n?function(){i.call(this,this.$root.$options.shadowRoot)}:i),d)if(l.functional){l._injectStyles=d;var c=l.render;l.render=function(t,o){return d.call(o),c(t,o)}}else{var u=l.beforeCreate;l.beforeCreate=u?[].concat(u,d):[d]}return{exports:t,options:l}}e.d(o,"a",function(){return s})},OzvS:function(t,o,e){"use strict";var s={name:"ordem-servico-servico",components:{modal:e("eqUL").a},data:function(){return{editing:!1,editingIndex:!1,servico_id:!1,valor_servico:0,valor_acrescimo:0,valor_desconto:0,valor_cobrado:0,servicos:[],isModalVisible:!1,deleteIndex:!1,servicosDisponiveis:[],servicosSelecionados:[],errors:{inputServicos:!1,inputServicosMsg:"",inputValorServico:!1,inputValorServicoMsg:"",inputValorAcrescimo:!1,inputValorAcrescimoMsg:"",inputValorDesconto:!1,inputValorDescontoMsg:"",inputValorCobrado:!1,inputValorCobradoMsg:""}}},props:["servicosData","oldData"],updated:function(){$(this.$refs.inputServicos).selectpicker("refresh")},watch:{oldData:function(){this.$refs.confirmDelete},servico_id:function(){var t=this.getServicoById(this.servico_id);this.valor_servico=0==t?0:t.valor_servico},valor_servico:function(){this.calTotalServicoItem()},valor_acrescimo:function(){this.calTotalServicoItem()},valor_desconto:function(){this.calTotalServicoItem()}},computed:{servicosDisponiveisOrdenados:function(){return this.servicosDisponiveis.sort(function(t,o){return t.servico<o.servico?-1:t.servico>o.servico?1:0})},valor_total_servicos:{get:function(){for(var t=0,o=0;o<this.servicosSelecionados.length;o++)t+=parseFloat(this.servicosSelecionados[o].valor_cobrado);return t}}},mounted:function(){if(this.createFields(),this.servicosDisponiveis=this.servicosData,null!==this.oldData)for(var t=0;t<this.oldData.length;t++)console.log(this.oldData[t]),this.valor_servico=parseFloat(this.oldData[t].valor_servico),this.valor_acrescimo=parseFloat(this.oldData[t].valor_acrescimo),this.valor_desconto=parseFloat(this.oldData[t].valor_desconto),this.valor_cobrado=parseFloat(this.oldData[t].valor_cobrado),this.incluirServico(this.oldData[t].servico_id),this.limparFormulario()},methods:{editItem:function(t){var o=this.servicosSelecionados[t];this.valor_servico=o.valor_servico,this.valor_acrescimo=o.valor_acrescimo,this.valor_desconto=o.valor_desconto,this.valor_cobrado=o.valor_cobrado,this.servico_id=o.id,this.editing=!0,this.editingIndex=t,this.servicosDisponiveis.push(o)},confirmDelete:function(t){this.deleteIndex=t},cancelDelete:function(t){this.deleteIndex=!1},deleteItem:function(){this.removerServico(this.servicosSelecionados[this.deleteIndex].id),this.$delete(this.servicosSelecionados,this.deleteIndex)},removerServico:function(t){this.servicosDisponiveis.push(this.getServicoSelecionadoById(t)),this.$delete(this.servicosSelecionados,this.getServicoSelecionadoIndexById(t)),this.$emit("updateTotalServ",this.valor_total_servicos)},addServico:function(){this.validarItem()&&(this.incluirServico(this.servico_id),this.limparFormulario())},limparFormulario:function(){this.servico_id=!1,this.valor_servico=0,this.valor_acrescimo=0,this.valor_desconto=0,this.valor_cobrado=0,this.$refs.inputServicos.focus()},getServicoById:function(t){for(var o=0,e=0;e<this.servicosDisponiveis.length;e++)if(this.servicosDisponiveis[e].id==t){o=this.servicosDisponiveis[e];break}return o},getServicoIndexById:function(t){for(var o=0,e=0;e<this.servicosDisponiveis.length;e++)if(this.servicosDisponiveis[e].id==t){o=e;break}return o},getServicoSelecionadoById:function(t){for(var o=0,e=0;e<this.servicosSelecionados.length;e++)if(this.servicosSelecionados[e].id==t){o=this.servicosSelecionados[e];break}return o},getServicoSelecionadoIndexById:function(t){for(var o=0,e=0;e<this.servicosSelecionados.length;e++)if(this.servicosSelecionados[e].id==t){o=e;break}return o},incluirServico:function(t){var o=this.getServicoById(t);o.valor_acrescimo=this.valor_acrescimo,o.valor_desconto=this.valor_desconto,o.valor_cobrado=this.valor_cobrado,this.servicosSelecionados.push(o),this.$delete(this.servicosDisponiveis,this.getServicoIndexById(t)),this.$emit("updateTotalServ",this.valor_total_servicos)},updateServico:function(){this.servicosSelecionados[this.editingIndex]={id:this.servico_id,servico:this.getServicoById(this.servico_id).servico,valor_servico:this.valor_servico,valor_acrescimo:this.valor_acrescimo,valor_desconto:this.valor_desconto,valor_cobrado:this.valor_cobrado},this.editing=!1,this.editingIndex=!1,this.limparFormulario(),this.$delete(this.servicosDisponiveis,this.getServicoIndexById(this.servico_id)),this.$emit("updateTotalServ",this.valor_total_servicos)},calTotalServicoItem:function(){this.valor_cobrado=parseFloat(isNaN(this.valor_servico)||""==this.valor_servico?0:this.valor_servico)+parseFloat(isNaN(this.valor_acrescimo)||""==this.valor_acrescimo?0:this.valor_acrescimo)-parseFloat(isNaN(this.valor_desconto)||""==this.valor_desconto?0:this.valor_desconto)},validarItem:function(){return!0},createFields:function(){for(var t=0;t<this.servicosData.length;t++)this.servicosData[t].valor_acrescimo=0,this.servicosData[t].valor_desconto=0,this.servicosData[t].valor_cobrado=0}}},i=e("KHd+"),r=Object(i.a)(s,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body",staticStyle:{padding:"0 !important"}},[e("table",{staticClass:"table table-sm table-striped table-bordered table-hover",staticStyle:{"margin-bottom":"0 !important"}},[t._m(1),t._v(" "),e("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.servicosSelecionados,function(o,s){return e("tr",{key:s,staticClass:"row m-0"},[e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                        "+t._s(o.id)+"\n                        "),e("input",{attrs:{type:"hidden",name:"servicos["+s+"][servico_id]"},domProps:{value:o.id}})]),t._v(" "),e("td",{staticClass:"col-md-6"},[t._v("\n                        "+t._s(o.servico)+"\n                    ")]),t._v(" "),e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                        "+t._s(t._f("toDecimal3")(o.valor_servico))+"\n                        "),e("input",{attrs:{type:"hidden",name:"servicos["+s+"][valor_servico]"},domProps:{value:o.valor_servico}})]),t._v(" "),e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                        "+t._s(t._f("toDecimal3")(o.valor_acrescimo))+"\n                        "),e("input",{attrs:{type:"hidden",name:"servicos["+s+"][valor_acrescimo]"},domProps:{value:o.valor_acrescimo}})]),t._v(" "),e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                        "+t._s(t._f("toDecimal3")(o.valor_desconto))+"\n                        "),e("input",{attrs:{type:"hidden",name:"servicos["+s+"][valor_desconto]"},domProps:{value:o.valor_desconto}})]),t._v(" "),e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                        "+t._s(t._f("toDecimal3")(o.valor_cobrado))+"\n                        "),e("input",{attrs:{type:"hidden",name:"servicos["+s+"][valor_cobrado]"},domProps:{value:o.valor_cobrado}})]),t._v(" "),e("td",{staticClass:"col-md-1"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-sm btn-warning",attrs:{type:"button"},on:{click:function(o){t.editItem(s)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-sm btn-danger",attrs:{type:"button","data-toggle":"modal","data-target":"#confirmDelete"},on:{click:function(o){t.confirmDelete(s)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])}))])]),t._v(" "),e("div",{staticClass:"panel-footer"},[e("div",{staticClass:"row m-0"},[e("div",{class:{"col-md-7":!0," has-error":this.errors.inputServicos},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.servico_id,expression:"servico_id"}],ref:"inputServicos",staticClass:"form-control selectpicker",attrs:{"data-style":"btn-secondary","data-live-search":"true",name:"inputServicos",id:"inputServicos"},on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.servico_id=o.target.multiple?e:e[0]}}},[e("option",{attrs:{selected:"",value:"false"}},[t._v(" Nada Selecionado ")]),t._v(" "),t._l(t.servicosDisponiveisOrdenados,function(o,s){return e("option",{key:s,domProps:{value:o.id}},[t._v(t._s(o.servico))])})],2),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputServicos}},[e("strong",[t._v(t._s(this.errors.inputServicosMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorServico},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_servico,expression:"valor_servico",modifiers:{number:!0}}],ref:"inputValorServico",staticClass:"form-control",attrs:{type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorServico",id:"inputValorServico",readonly:""},domProps:{value:t.valor_servico},on:{input:function(o){o.target.composing||(t.valor_servico=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorServico}},[e("strong",[t._v(t._s(this.errors.inputValorServicoMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorAcrescimo},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_acrescimo,expression:"valor_acrescimo",modifiers:{number:!0}}],ref:"inputValorAcrescimo",staticClass:"form-control",attrs:{type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorAcrescimo",id:"inputValorAcrescimo"},domProps:{value:t.valor_acrescimo},on:{input:function(o){o.target.composing||(t.valor_acrescimo=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorAcrescimo}},[e("strong",[t._v(t._s(this.errors.inputValorAcrescimoMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorDesconto},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_desconto,expression:"valor_desconto",modifiers:{number:!0}}],ref:"inputValorDesconto",staticClass:"form-control",attrs:{type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorDesconto",id:"inputValorDesconto"},domProps:{value:t.valor_desconto},on:{input:function(o){o.target.composing||(t.valor_desconto=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorDesconto}},[e("strong",[t._v(t._s(this.errors.inputValorDescontoMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorValorCobrado},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_cobrado,expression:"valor_cobrado",modifiers:{number:!0}}],ref:"inputValorValorCobrado",staticClass:"form-control",attrs:{type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorValorCobrado",id:"inputValorValorCobrado",readonly:""},domProps:{value:t.valor_cobrado},on:{input:function(o){o.target.composing||(t.valor_cobrado=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorValorCobrado}},[e("strong",[t._v(t._s(this.errors.inputValorValorCobradoMsg))])])]),t._v(" "),e("div",{staticClass:"col-md-1"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.addServico}},[e("i",{staticClass:"fas fa-plus"})]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],staticClass:"btn btn-success",attrs:{type:"button"},on:{click:t.updateServico}},[e("i",{staticClass:"fas fa-check"})])])])]),t._v(" "),e("modal",{attrs:{"modal-title":"Corfirmação","modal-text":"Confirma a remoção deste Item?"},on:{cancel:t.cancelDelete,confirm:t.deleteItem}})],1)},[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"card-header"},[o("strong",[this._v("Servicos")])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("thead",{staticClass:"thead-light"},[e("tr",{staticClass:"row m-0"},[e("th",{staticClass:"col-md-1"},[t._v("Id")]),t._v(" "),e("th",{staticClass:"col-md-6"},[t._v("Serviço")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Serv.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Acrés.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Desc.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Final")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("Ações")])])])}],!1,null,null,null);r.options.__file="OsServicoComponent.vue";o.a=r.exports},PlGf:function(t,o,e){"use strict";var s={name:"modal2",methods:{cancel2:function(){this.$emit("cancel2")},confirm2:function(){this.$emit("confirm2")}},props:["modalTitle","modalText"]},i=e("KHd+"),r=Object(i.a)(s,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("transition",{attrs:{name:"modal-fade"}},[e("div",{staticClass:"modal fade",attrs:{id:"confirmDelete2",role:"dialog","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content modal-default"},[e("div",{staticClass:"modal-header"},[e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal2","aria-hidden":"true"}},[t._v("×")]),t._v(" "),e("div",{staticClass:"row"},[e("div",{staticClass:"col-sm-1"},[e("span",{staticClass:"glyphicon glyphicon-alert"})]),t._v(" "),e("div",{staticClass:"col"},[e("h4",{staticClass:"modal-title"},[e("strong",[t._v(t._s(this.modalTitle))])])])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("p",[t._v("\n              "+t._s(this.modalText)+"                  \n            ")])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal",id:"confirm2"},on:{click:t.confirm2}},[t._v("Remover")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.cancel2}},[t._v("Cancelar")])])])])])])},[],!1,null,null,null);r.options.__file="modal2.vue";var a={name:"ordem-servico-produto",components:{modal2:r.exports},props:["oldData","estoques","oldEstoqueId","estoqueError"],data:function(){return{editing:!1,editingIndex:!1,produtos:[],quantidade:1,valor_desconto:0,valor_acrescimo:0,valor_cobrado:0,valor_unitario:0,isModalVisible:!1,deleteIndex:!1,produtosDisponiveis:[],produtosSelecionados:[],produtosData:[],loadOldDataFlag:!0,errors:{inputProdutos:!1,inputProdutosMsg:"",inputQuantidade:!1,inputQuantidadeMsg:"",inputValorUnitario:!1,inputValorUnitariodeMsg:"",inputDesconto:!1,inputDescontoMsg:"",inputAcrescimo:!1,inputAcrescimoMsg:"",estoqueId:!1,estoqueIdMsg:""},_produto_id:!1,get produto_id(){return this._produto_id},set produto_id(t){this._produto_id=t},_estoqueId:null,get estoqueId(){return this._estoqueId},set estoqueId(t){this._estoqueId=t}}},watch:{oldData:function(){},estoqueId:function(){this.getProdutos()},valor_produto:function(){this.calcTotalProdutoItem()},valor_desconto:function(){this.calcTotalProdutoItem()},valor_acrescimo:function(){this.calcTotalProdutoItem()},quantidade:function(){this.calcTotalProdutoItem()},produto_id:function(){this.editing||(this.valor_unitario=this.getProdutoById(this.produto_id).valor_venda),this.calcTotalProdutoItem()}},computed:{estoque_id:{get:function(){return this.estoqueId},set:function(t){this.estoqueId=t}},valor_total:{get:function(){console.log("entrou no valor_total");for(var t=0,o=0;o<this.produtos.length;o++)t+=(parseFloat(this.produtos[o].valor_produto)+parseFloat(this.produtos[o].valor_acrescimo)-parseFloat(this.produtos[o].valor_desconto))*this.produtos[o].quantidade;return parseFloat(t)}},produtosDisponiveisOrdenados:function(){return this.produtosDisponiveis.sort(function(t,o){return t.produto_descricao<o.produto_descricao?-1:t.produto_descricao>o.produto_descricao?1:0})}},mounted:function(){null!==this.oldEstoqueId&&(this.estoqueId=this.oldEstoqueId)},updated:function(){$(this.$refs.inputProdutos).selectpicker("refresh"),$(this.$refs.estoqueId).selectpicker("refresh")},methods:{getValorTotal:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=(parseFloat(this.produtos[o].valor_produto)+parseFloat(this.produtos[o].valor_acrescimo)-parseFloat(this.produtos[o].valor_desconto))*this.produtos[o].quantidade;return parseFloat(t)},getProdutos:function(){var t=this;this.estoqueId>0&&axios.get("/produtos_estoque/"+this.estoqueId+"/json").then(function(o){t.produtosDisponiveis=o.data,t.produtosData=o.data,t.loadOldData()})},loadOldData:function(){if(null!==this.oldData&&1==this.loadOldDataFlag){this.loadOldDataFlag=!1;for(var t=0;t<this.oldData.length;t++)this.produtos.push({id:this.oldData[t].produto_id,produto_descricao:this.getProdutoById(this.oldData[t].produto_id).produto_descricao,quantidade:Number(this.oldData[t].quantidade),valor_produto:Number(this.oldData[t].valor_produto),valor_desconto:Number(this.oldData[t].valor_desconto),valor_acrescimo:Number(this.oldData[t].valor_acrescimo),valor_cobrado:Number(this.oldData[t].valor_cobrado)}),this.incluirProduto(this.oldData[t].produto_id)}},truncDecimal:function(t,o){return 0===t?t:(x=(t.toString()+".0").split("."),x||(x=0),parseFloat(x[0]+","+x[1].substr(0,o)))},validarItem:function(){if(""==this.produto_id||this.produto_id<=0)return this.errors.inputProdutos=!0,this.errors.inputProdutosMsg="Nenhum Produto selecionado.",!1;if(this.errors.inputProdutos=!1,this.errors.inputProdutosMsg="",""==this.quantidade||this.quantidade<=0)return this.errors.inputQuantidade=!0,this.errors.inputQuantidadeMsg="Informe a quantidade do produto.",!1;if(this.getEstoqueById(this.estoqueId).permite_estoque_negativo)this.errors.inputQuantidade=!1,this.errors.inputQuantidadeMsg="";else{var t=this.getProdutoById(this.produto_id).posicao_estoque;if(console.log("posicao_estoque_produto: "+t),this.quantidade>t)return this.errors.inputQuantidade=!0,this.errors.inputQuantidadeMsg="Quantidade informada execede saldo em estoque ("+this.truncDecimal(t,3)+").",!1}return""==this.valor_unitario||this.valor_unitario<=0?(this.errors.inputValorUnitario=!0,this.errors.inputValorUnitarioMsg="Informe o Valor Unitário do produto.",!1):(this.errors.inputValorUnitario=!1,this.errors.inputValorUnitarioMsg="",!0)},confirmDeleteProduto:function(t){this.deleteIndex=t},cancelDelete:function(t){this.deleteIndex=!1},cancelProtuto:function(){},confirmProtuto:function(){},addProduto:function(){this.validarItem()&&(this.produtos.push({id:this.produto_id,produto_descricao:this.getProdutoById(this.produto_id).produto_descricao,quantidade:Number(this.quantidade),valor_produto:Number(this.getProdutoById(this.produto_id).valor_venda),valor_desconto:Number(this.valor_desconto),valor_acrescimo:Number(this.valor_acrescimo),valor_cobrado:Number(this.valor_cobrado)}),this.incluirProduto(this.produto_id),this.limparFormulario())},editItem:function(t){this.editing=!0,this.editingIndex=t;var o=this.produtos[t];this.produto_id=o.id,this.quantidade=Number(o.quantidade),this.valor_unitario=Number(o.valor_produto),this.valor_desconto=Number(o.valor_desconto),this.valor_acrescimo=Number(o.valor_acrescimo),this.produtosDisponiveis.push(o)},updateProduto:function(){this.produtos[this.editingIndex]={id:this.produto_id,produto_descricao:this.getProdutoById(this.produto_id).produto_descricao,quantidade:Number(this.quantidade),valor_produto:Number(this.valor_unitario),valor_desconto:Number(this.valor_desconto),valor_acrescimo:Number(this.valor_acrescimo),valor_cobrado:Number(this.valor_cobrado)},this.editing=!1,this.editingIndex=!1,this.limparFormulario(),this.$delete(this.produtosDisponiveis,this.getProdutoIndexById(this.produto_id));var t=this.getValorTotal();this.$emit("updateTotalProd",t)},deleteProduto:function(){this.removerProduto(this.produtos[this.deleteIndex].id),this.$delete(this.produtos,this.deleteIndex)},limparFormulario:function(){this.produto_id=null,this.produtoSelecionado=!1,this.quantidade=1,this.valor_unitario=0,this.valor_desconto=0,this.valor_acrescimo=0,this.valor_cobrado=0,this.$refs.inputProdutos.focus()},totalQuantidade:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=this.produtos[o].quantidade;return t},totalValor:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=this.produtos[o].valor_produto;return t},totalDesconto:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=this.produtos[o].valor_desconto;return t},totalAcrescimo:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=this.produtos[o].valor_acrescimo;return t},totalCobrado:function(){for(var t=0,o=0;o<this.produtos.length;o++)t+=this.produtos[o].valor_cobrado;return t},getProdutoById:function(t){for(var o=0,e=0;e<this.produtosData.length;e++)if(this.produtosData[e].id==t){o=this.produtosData[e];break}return o},getEstoqueById:function(t){for(var o=0,e=0;e<this.estoques.length;e++)if(this.estoques[e].id==t){o=this.estoques[e];break}return o},getProdutoIndexById:function(t){for(var o=0,e=0;e<this.produtosData.length;e++)if(this.produtosData[e].id==t){o=e;break}return o},getProdutoSelecionadoById:function(t){for(var o=0,e=0;e<this.produtosSelecionados.length;e++)if(this.produtosSelecionados[e].id==t){o=this.produtosSelecionados[e];break}return o},getProdutoSelecionadoIndexById:function(t){for(var o=0,e=0;e<this.produtosSelecionados.length;e++)if(this.produtosSelecionados[e].id==t){o=e;break}return o},incluirProduto:function(t){this.produtosSelecionados.push(this.getProdutoById(t)),this.$delete(this.produtosDisponiveis,this.getProdutoIndexById(t)),this.$emit("updateTotalProd",this.valor_total)},removerProduto:function(t){this.produtosDisponiveis.push(this.getProdutoSelecionadoById(t)),this.$delete(this.produtosSelecionados,this.getProdutoSelecionadoIndexById(t)),this.$emit("updateTotalProd",this.valor_total)},calcTotalProdutoItem:function(){this.valor_cobrado=(parseFloat(isNaN(this.valor_unitario)||""==this.valor_unitario?0:this.valor_unitario)+parseFloat(isNaN(this.valor_acrescimo)||""==this.valor_acrescimo?0:this.valor_acrescimo)-parseFloat(isNaN(this.valor_desconto)||""==this.valor_desconto?0:this.valor_desconto))*parseFloat(isNaN(this.quantidade)||""==this.quantidade?1:this.quantidade)}}},n=Object(i.a)(a,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{staticClass:"form-group"},[e("div",{staticClass:"row"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.estoque_id,expression:"estoque_id"}],attrs:{type:"hidden",name:"estoque_id"},domProps:{value:t.estoque_id},on:{input:function(o){o.target.composing||(t.estoque_id=o.target.value)}}}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.valor_total,expression:"valor_total"}],attrs:{type:"hidden",name:"valor_total"},domProps:{value:t.valor_total},on:{input:function(o){o.target.composing||(t.valor_total=o.target.value)}}}),t._v(" "),e("div",{class:{"col-md-7":!0," has-error":this.errors.estoqueId}},[e("label",{staticClass:"control-label",attrs:{for:"estoqueId"}},[t._v("Estoque")]),t._v(" "),e("select",{directives:[{name:"model",rawName:"v-model",value:t.estoqueId,expression:"estoqueId"}],ref:"estoqueId",staticClass:"form-control selectpicker",attrs:{"data-style":"btn-secondary","data-live-search":"true",name:"estoqueId",id:"estoqueId",disabled:t.produtosSelecionados.length>0},on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.estoqueId=o.target.multiple?e:e[0]}}},[e("option",{attrs:{selected:"",value:""}},[t._v(" Nada Selecionado ")]),t._v(" "),t._l(this.estoques,function(o,s){return e("option",{key:s,domProps:{value:o.id}},[t._v(t._s(o.estoque))])})],2),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.estoqueId}},[e("strong",[t._v(t._s(this.errors.estoqueIdMsg))])])])]),t._v(" "),e("div",{staticClass:"card"},[t._m(0),t._v(" "),e("div",{staticClass:"card-body",staticStyle:{padding:"0 !important"}},[e("table",{staticClass:"table table-sm table-striped table-bordered table-hover",staticStyle:{"margin-bottom":"0 !important"}},[t._m(1),t._v(" "),e("transition-group",{tag:"tbody",attrs:{name:"fade"}},t._l(t.produtos,function(o,s){return e("tr",{key:s,staticClass:"row m-0"},[e("td",{staticClass:"col-md-1 pool-right"},[t._v("\n                            "+t._s(o.id)+"\n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][produto_id]"},domProps:{value:o.id}})]),t._v(" "),e("td",{staticClass:"col-md-5"},[t._v("\n                            "+t._s(o.produto_descricao)+"\n                        ")]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[t._v("\n                            "+t._s(t._f("toDecimal3")(o.quantidade))+" \n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][quantidade]"},domProps:{value:o.quantidade}})]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[t._v("\n                            "+t._s(t._f("toDecimal3")(o.valor_produto))+"\n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][valor_produto]"},domProps:{value:o.valor_produto}})]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[t._v("\n                            "+t._s(t._f("toDecimal3")(o.valor_desconto))+"\n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][valor_desconto]"},domProps:{value:o.valor_desconto}})]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[t._v("\n                            "+t._s(t._f("toDecimal3")(o.valor_acrescimo))+"\n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][valor_acrescimo]"},domProps:{value:o.valor_acrescimo}})]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[t._v("\n                            "+t._s(t._f("toDecimal3")(o.valor_cobrado))+"\n                            "),e("input",{attrs:{type:"hidden",name:"produtos["+s+"][valor_cobrado]"},domProps:{value:o.valor_cobrado}})]),t._v(" "),e("td",{staticClass:"col-md-1"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-sm btn-warning",attrs:{type:"button"},on:{click:function(o){t.editItem(s)}}},[e("i",{staticClass:"fas fa-edit"})]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-sm btn-danger",attrs:{type:"button","data-toggle":"modal","data-target":"#confirmDelete2"},on:{click:function(o){t.confirmDeleteProduto(s)}}},[e("i",{staticClass:"fas fa-trash-alt"})])])])})),t._v(" "),this.produtos.length>0?e("tfoot",[e("tr",{staticClass:"row m-0"},[e("td",{staticClass:"col-md-1"},[e("strong",[t._v(t._s(this.produtos.length))])]),t._v(" "),e("td",{staticClass:"col-md-5"}),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[e("strong",[t._v(t._s(t._f("toDecimal3")(this.totalQuantidade())))])]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[e("strong",[t._v(t._s(t._f("toDecimal3")(this.totalValor())))])]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[e("strong",[t._v(t._s(t._f("toDecimal3")(this.totalDesconto())))])]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[e("strong",[t._v(t._s(t._f("toDecimal3")(this.totalAcrescimo())))])]),t._v(" "),e("td",{staticClass:"col-md-1 text-right"},[e("strong",[t._v(t._s(t._f("toDecimal3")(this.totalCobrado())))])]),t._v(" "),e("td",{staticClass:"col-md-2"})])]):t._e()])]),t._v(" "),e("div",[e("div",{staticClass:"row m-0"},[e("div",{class:{"col-md-6":!0," has-error":this.errors.inputProdutos},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("select",{directives:[{name:"model",rawName:"v-model",value:t.produto_id,expression:"produto_id"}],ref:"inputProdutos",staticClass:"form-control selectpicker",attrs:{"data-style":"btn-secondary",disabled:"false"==t.estoqueId||null==t.estoqueId,"data-live-search":"true",name:"inputProdutos",id:"inputProdutos"},on:{change:function(o){var e=Array.prototype.filter.call(o.target.options,function(t){return t.selected}).map(function(t){return"_value"in t?t._value:t.value});t.produto_id=o.target.multiple?e:e[0]}}},[e("option",{attrs:{selected:"",value:"false"}},[t._v(" Nada Selecionado ")]),t._v(" "),t._l(t.produtosDisponiveisOrdenados,function(o,s){return e("option",{key:s,domProps:{value:o.id}},[t._v(t._s(o.produto_descricao))])})],2),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputProdutos}},[e("strong",[t._v(t._s(this.errors.inputProdutosMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputQuantidade},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.quantidade,expression:"quantidade",modifiers:{number:!0}}],ref:"inputQuantidade",staticClass:"form-control",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputQuantidade",id:"inputQuantidade"},domProps:{value:t.quantidade},on:{input:function(o){o.target.composing||(t.quantidade=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputQuantidade}},[e("strong",[t._v(t._s(this.errors.inputQuantidadeMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorUnitario},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_unitario,expression:"valor_unitario",modifiers:{number:!0}}],ref:"inputValorUnitario",staticClass:"form-control",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorUnitario",id:"inputValorUnitario",readonly:""},domProps:{value:t.valor_unitario},on:{input:function(o){o.target.composing||(t.valor_unitario=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorUnitario}},[e("strong",[t._v(t._s(this.errors.inputValorUnitarioMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputAcrescimo},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_acrescimo,expression:"valor_acrescimo",modifiers:{number:!0}}],ref:"inputAcrescimo",staticClass:"form-control",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputAcrescimo",id:"inputAcrescimo"},domProps:{value:t.valor_acrescimo},on:{input:function(o){o.target.composing||(t.valor_acrescimo=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputAcrescimo}},[e("strong",[t._v(t._s(this.errors.inputAcrescimoMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputDesconto},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_desconto,expression:"valor_desconto",modifiers:{number:!0}}],ref:"inputDesconto",staticClass:"form-control",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputDesconto",id:"inputDesconto"},domProps:{value:t.valor_desconto},on:{input:function(o){o.target.composing||(t.valor_desconto=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputDesconto}},[e("strong",[t._v(t._s(this.errors.inputDescontoMsg))])])]),t._v(" "),e("div",{class:{"col-md-1":!0," has-error":this.errors.inputValorCobrado},staticStyle:{"padding-right":"0 !important","padding-left":"0 !important"}},[e("input",{directives:[{name:"model",rawName:"v-model.number",value:t.valor_cobrado,expression:"valor_cobrado",modifiers:{number:!0}}],ref:"inputValorCobrado",staticClass:"form-control",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"number",min:"0,000",max:"9999999999,999",step:"any",name:"inputValorCobrado",id:"inputValorCobrado",readonly:""},domProps:{value:t.valor_cobrado},on:{input:function(o){o.target.composing||(t.valor_cobrado=t._n(o.target.value))},blur:function(o){t.$forceUpdate()}}}),t._v(" "),e("span",{staticClass:"help-block",attrs:{"v-if":this.errors.inputValorCobrado}},[e("strong",[t._v(t._s(this.errors.inputValorCobradoMsg))])])]),t._v(" "),e("div",{staticClass:"col-md-1"},[e("button",{directives:[{name:"show",rawName:"v-show",value:!t.editing,expression:"!editing"}],staticClass:"btn btn-success",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"button"},on:{click:t.addProduto}},[e("i",{staticClass:"fas fa-plus"})]),t._v(" "),e("button",{directives:[{name:"show",rawName:"v-show",value:t.editing,expression:"editing"}],staticClass:"btn btn-success",attrs:{disabled:"false"==t.estoqueId||null==t.estoqueId,type:"button"},on:{click:t.updateProduto}},[e("i",{staticClass:"fas fa-check"})])])])]),t._v(" "),e("modal2",{attrs:{"modal-title":"Corfirmação","modal-text":"Confirma a remoção deste Item?"},on:{cancel2:t.cancelDelete,confirm2:t.deleteProduto}})],1)])},[function(){var t=this.$createElement,o=this._self._c||t;return o("div",{staticClass:"card-header"},[o("strong",[this._v("Produtos")])])},function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("thead",{staticClass:"thead-light"},[e("tr",{staticClass:"row m-0"},[e("th",{staticClass:"col-md-1"},[t._v("Id")]),t._v(" "),e("th",{staticClass:"col-md-5"},[t._v("Produto")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("Qtd")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Un.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Acrés.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Desc.")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("R$ Final")]),t._v(" "),e("th",{staticClass:"col-md-1"},[t._v("Ações")])])])}],!1,null,null,null);n.options.__file="OsProdutoComponent.vue";o.a=n.exports},RXzX:function(t,o,e){"use strict";e.r(o);var s=e("OzvS"),i=e("PlGf"),r={name:"ordem-servico",components:{ordemServicoServico:s.a,ordemServicoProduto:i.a},props:["servicosData","oldServicosData","estoques","oldEstoqueId","oldProdutosData"],data:function(){return{valor_total_produtos:0,valor_total_servicos:0}},methods:{updateTotalServicos:function(t){this.valor_total_servicos=t},updateTotalProdutos:function(t){this.valor_total_produtos=t}},computed:{valor_total_os:{get:function(){return parseFloat(this.valor_total_produtos+this.valor_total_servicos)}}}},a=e("KHd+"),n=Object(a.a)(r,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",[e("ordem-servico-servico",{attrs:{"servicos-data":t.servicosData,"old-data":t.oldServicosData},on:{updateTotalServ:t.updateTotalServicos}}),t._v(" "),e("ordem-servico-produto",{attrs:{estoques:t.estoques,"old-estoque-id":t.oldEstoqueId,"old-data":t.oldProdutosData},on:{updateTotalProd:t.updateTotalProdutos}}),t._v(" "),e("div",{staticClass:"col col-sm-4 pull-right",staticStyle:{padding:"0px !important"}},[e("label",{staticClass:"control-label",attrs:{for:"inputValorTotalOs"}},[t._v("Valor Total")]),t._v(" "),e("div",{staticClass:"form-control"},[t._v(t._s(t._f("toDecimal3")(t.valor_total_os)))]),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.valor_total_os,expression:"valor_total_os"}],ref:"inputValorTotalOs",staticClass:"form-control",attrs:{type:"hidden",name:"valor_total",id:"valor_total",readonly:""},domProps:{value:t.valor_total_os},on:{input:function(o){o.target.composing||(t.valor_total_os=o.target.value)}}})])],1)},[],!1,null,null,null);n.options.__file="OsComponent.vue";var d=n.exports;new Vue({el:"#ordem_servico",components:{ordemServico:d}})},eqUL:function(t,o,e){"use strict";var s={name:"modal",methods:{cancel:function(){this.$emit(this._eventCancel)},confirm:function(){this.$emit(this._eventConfirm)}},props:["modalTitle","modalText","eventCancel","eventConfirm"],computed:{_eventCancel:{get:function(){return null==this.eventCancel?"cancel":this.eventCancel}},_eventConfirm:{get:function(){return null==this.eventConfirm?"confirm":this.eventConfirm}}},mounted:function(){}},i=e("KHd+"),r=Object(i.a)(s,function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("transition",{attrs:{name:"modal-fade"}},[e("div",{staticClass:"modal fade",attrs:{id:"confirmDelete",role:"dialog","aria-labelledby":"confirmDeleteLabel","aria-hidden":"true"}},[e("div",{staticClass:"modal-dialog"},[e("div",{staticClass:"modal-content"},[e("div",{staticClass:"modal-header"},[e("h4",{staticClass:"modal-title"},[e("strong",[t._v(t._s(this.modalTitle))])]),t._v(" "),e("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[e("span",{attrs:{"aria-hidden":"true"}},[t._v("×")])])]),t._v(" "),e("div",{staticClass:"modal-body"},[e("p",[t._v("\n              "+t._s(this.modalText)+"                  \n            ")])]),t._v(" "),e("div",{staticClass:"modal-footer"},[e("button",{staticClass:"btn btn-danger",attrs:{type:"button","data-dismiss":"modal",id:"confirm"},on:{click:t.confirm}},[t._v("Remover")]),t._v(" "),e("button",{staticClass:"btn btn-primary",attrs:{type:"button","data-dismiss":"modal"},on:{click:t.cancel}},[t._v("Cancelar")])])])])])])},[],!1,null,null,null);r.options.__file="modal.vue";o.a=r.exports}});